{"ast":null,"code":"// src/pages/Shop.jsx\nimport{useEffect,useState}from\"react\";import\"./shop.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Shop(){const[products,setProducts]=useState([]);const[error,setError]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{async function fetchProducts(){try{var _data$data;console.log(\"üõçÔ∏è Chargement des produits depuis Netlify...\");const response=await fetch(\"/.netlify/functions/products\");if(!response.ok)throw new Error(\"Erreur serveur\");const data=await response.json();console.log(\"üíé Donn√©es re√ßues :\",data);// üß© Correction ici : on v√©rifie le format exact\nlet items=[];if(Array.isArray(data)){items=data;}else if(Array.isArray(data.result)){items=data.result;}else if(Array.isArray((_data$data=data.data)===null||_data$data===void 0?void 0:_data$data.result)){items=data.data.result;}else{console.warn(\"‚ö†Ô∏è Format inattendu des donn√©es :\",data);}// ü™Ñ On extrait le bon prix Printful\nconst formatted=items.map(item=>{var _item$sync_variants,_item$sync_variants$,_item$sync_variants2,_item$sync_variants2$;const retail=item.price||((_item$sync_variants=item.sync_variants)===null||_item$sync_variants===void 0?void 0:(_item$sync_variants$=_item$sync_variants[0])===null||_item$sync_variants$===void 0?void 0:_item$sync_variants$.retail_price)||((_item$sync_variants2=item.sync_variants)===null||_item$sync_variants2===void 0?void 0:(_item$sync_variants2$=_item$sync_variants2[0])===null||_item$sync_variants2$===void 0?void 0:_item$sync_variants2$.variant_retail_price)||\"prix sur demande üî•\";return{id:item.id,name:item.name,thumbnail_url:item.thumbnail_url,price:retail};});setProducts(formatted);}catch(err){console.error(\"‚ùå Erreur :\",err.message);setError(\"Impossible de charger les produits pour le moment.\");}finally{setLoading(false);}}fetchProducts();},[]);if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"shop-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"shop-title\",children:\"\\uD83D\\uDC8E Boutique Privat Label\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"shop-subtitle\",children:\"Luxury \\u2022 Street \\u2022 Glow\"}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"loading-text\",children:\"Chargement des produits...\"}):products.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"shop-grid\",children:products.map(p=>/*#__PURE__*/_jsxs(\"div\",{className:\"shop-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"shop-image-wrapper\",children:/*#__PURE__*/_jsx(\"img\",{src:p.thumbnail_url,alt:p.name,className:\"shop-image\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"shop-name\",children:p.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"shop-price\",children:[p.price,\" \\u20AC\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"buy-button\",children:\"Voir le produit\"})]},p.id))}):/*#__PURE__*/_jsx(\"p\",{className:\"loading-text\",children:\"Aucun produit disponible.\"})]});}","map":{"version":3,"names":["useEffect","useState","jsx","_jsx","jsxs","_jsxs","Shop","products","setProducts","error","setError","loading","setLoading","fetchProducts","_data$data","console","log","response","fetch","ok","Error","data","json","items","Array","isArray","result","warn","formatted","map","item","_item$sync_variants","_item$sync_variants$","_item$sync_variants2","_item$sync_variants2$","retail","price","sync_variants","retail_price","variant_retail_price","id","name","thumbnail_url","err","message","className","children","length","p","src","alt"],"sources":["/Users/hivecard/Downloads/privatlabel-clean_v1 copie/src/pages/Shop.jsx"],"sourcesContent":["// src/pages/Shop.jsx\nimport { useEffect, useState } from \"react\";\nimport \"./shop.css\";\n\nexport default function Shop() {\nconst [products, setProducts] = useState([]);\nconst [error, setError] = useState(null);\nconst [loading, setLoading] = useState(true);\n\nuseEffect(() => {\nasync function fetchProducts() {\ntry {\nconsole.log(\"üõçÔ∏è Chargement des produits depuis Netlify...\");\nconst response = await fetch(\"/.netlify/functions/products\");\nif (!response.ok) throw new Error(\"Erreur serveur\");\n\nconst data = await response.json();\nconsole.log(\"üíé Donn√©es re√ßues :\", data);\n\n// üß© Correction ici : on v√©rifie le format exact\nlet items = [];\nif (Array.isArray(data)) {\nitems = data;\n} else if (Array.isArray(data.result)) {\nitems = data.result;\n} else if (Array.isArray(data.data?.result)) {\nitems = data.data.result;\n} else {\nconsole.warn(\"‚ö†Ô∏è Format inattendu des donn√©es :\", data);\n}\n\n// ü™Ñ On extrait le bon prix Printful\nconst formatted = items.map((item) => {\nconst retail =\nitem.price ||\nitem.sync_variants?.[0]?.retail_price ||\nitem.sync_variants?.[0]?.variant_retail_price ||\n\"prix sur demande üî•\";\nreturn {\nid: item.id,\nname: item.name,\nthumbnail_url: item.thumbnail_url,\nprice: retail,\n};\n});\n\nsetProducts(formatted);\n} catch (err) {\nconsole.error(\"‚ùå Erreur :\", err.message);\nsetError(\"Impossible de charger les produits pour le moment.\");\n} finally {\nsetLoading(false);\n}\n}\n\nfetchProducts();\n}, []);\n\nif (error) return <p className=\"error-message\">{error}</p>;\n\nreturn (\n<div className=\"shop-container\">\n<h1 className=\"shop-title\">üíé Boutique Privat Label</h1>\n<h3 className=\"shop-subtitle\">Luxury ‚Ä¢ Street ‚Ä¢ Glow</h3>\n\n{loading ? (\n<p className=\"loading-text\">Chargement des produits...</p>\n) : products.length > 0 ? (\n<div className=\"shop-grid\">\n{products.map((p) => (\n<div key={p.id} className=\"shop-card\">\n<div className=\"shop-image-wrapper\">\n<img\nsrc={p.thumbnail_url}\nalt={p.name}\nclassName=\"shop-image\"\n/>\n</div>\n<p className=\"shop-name\">{p.name}</p>\n<p className=\"shop-price\">{p.price} ‚Ç¨</p>\n<button className=\"buy-button\">Voir le produit</button>\n</div>\n))}\n</div>\n) : (\n<p className=\"loading-text\">Aucun produit disponible.</p>\n)}\n</div>\n);\n}\n"],"mappings":"AAAA;AACA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpB,cAAe,SAAS,CAAAC,IAAIA,CAAA,CAAG,CAC/B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGP,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACQ,KAAK,CAAEC,QAAQ,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAE5CD,SAAS,CAAC,IAAM,CAChB,cAAe,CAAAa,aAAaA,CAAA,CAAG,CAC/B,GAAI,KAAAC,UAAA,CACJC,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC,CAC5D,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,8BAA8B,CAAC,CAC5D,GAAI,CAACD,QAAQ,CAACE,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,gBAAgB,CAAC,CAEnD,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CAClCP,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAEK,IAAI,CAAC,CAExC;AACA,GAAI,CAAAE,KAAK,CAAG,EAAE,CACd,GAAIC,KAAK,CAACC,OAAO,CAACJ,IAAI,CAAC,CAAE,CACzBE,KAAK,CAAGF,IAAI,CACZ,CAAC,IAAM,IAAIG,KAAK,CAACC,OAAO,CAACJ,IAAI,CAACK,MAAM,CAAC,CAAE,CACvCH,KAAK,CAAGF,IAAI,CAACK,MAAM,CACnB,CAAC,IAAM,IAAIF,KAAK,CAACC,OAAO,EAAAX,UAAA,CAACO,IAAI,CAACA,IAAI,UAAAP,UAAA,iBAATA,UAAA,CAAWY,MAAM,CAAC,CAAE,CAC7CH,KAAK,CAAGF,IAAI,CAACA,IAAI,CAACK,MAAM,CACxB,CAAC,IAAM,CACPX,OAAO,CAACY,IAAI,CAAC,mCAAmC,CAAEN,IAAI,CAAC,CACvD,CAEA;AACA,KAAM,CAAAO,SAAS,CAAGL,KAAK,CAACM,GAAG,CAAEC,IAAI,EAAK,KAAAC,mBAAA,CAAAC,oBAAA,CAAAC,oBAAA,CAAAC,qBAAA,CACtC,KAAM,CAAAC,MAAM,CACZL,IAAI,CAACM,KAAK,IAAAL,mBAAA,CACVD,IAAI,CAACO,aAAa,UAAAN,mBAAA,kBAAAC,oBAAA,CAAlBD,mBAAA,CAAqB,CAAC,CAAC,UAAAC,oBAAA,iBAAvBA,oBAAA,CAAyBM,YAAY,KAAAL,oBAAA,CACrCH,IAAI,CAACO,aAAa,UAAAJ,oBAAA,kBAAAC,qBAAA,CAAlBD,oBAAA,CAAqB,CAAC,CAAC,UAAAC,qBAAA,iBAAvBA,qBAAA,CAAyBK,oBAAoB,GAC7C,qBAAqB,CACrB,MAAO,CACPC,EAAE,CAAEV,IAAI,CAACU,EAAE,CACXC,IAAI,CAAEX,IAAI,CAACW,IAAI,CACfC,aAAa,CAAEZ,IAAI,CAACY,aAAa,CACjCN,KAAK,CAAED,MACP,CAAC,CACD,CAAC,CAAC,CAEF3B,WAAW,CAACoB,SAAS,CAAC,CACtB,CAAE,MAAOe,GAAG,CAAE,CACd5B,OAAO,CAACN,KAAK,CAAC,YAAY,CAAEkC,GAAG,CAACC,OAAO,CAAC,CACxClC,QAAQ,CAAC,oDAAoD,CAAC,CAC9D,CAAC,OAAS,CACVE,UAAU,CAAC,KAAK,CAAC,CACjB,CACA,CAEAC,aAAa,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIJ,KAAK,CAAE,mBAAON,IAAA,MAAG0C,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAErC,KAAK,CAAI,CAAC,CAE1D,mBACAJ,KAAA,QAAKwC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC/B3C,IAAA,OAAI0C,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,oCAAwB,CAAI,CAAC,cACxD3C,IAAA,OAAI0C,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,kCAAsB,CAAI,CAAC,CAExDnC,OAAO,cACRR,IAAA,MAAG0C,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,4BAA0B,CAAG,CAAC,CACtDvC,QAAQ,CAACwC,MAAM,CAAG,CAAC,cACvB5C,IAAA,QAAK0C,SAAS,CAAC,WAAW,CAAAC,QAAA,CACzBvC,QAAQ,CAACsB,GAAG,CAAEmB,CAAC,eAChB3C,KAAA,QAAgBwC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACrC3C,IAAA,QAAK0C,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cACnC3C,IAAA,QACA8C,GAAG,CAAED,CAAC,CAACN,aAAc,CACrBQ,GAAG,CAAEF,CAAC,CAACP,IAAK,CACZI,SAAS,CAAC,YAAY,CACrB,CAAC,CACG,CAAC,cACN1C,IAAA,MAAG0C,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAEE,CAAC,CAACP,IAAI,CAAI,CAAC,cACrCpC,KAAA,MAAGwC,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAEE,CAAC,CAACZ,KAAK,CAAC,SAAE,EAAG,CAAC,cACzCjC,IAAA,WAAQ0C,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,iBAAe,CAAQ,CAAC,GAV7CE,CAAC,CAACR,EAWP,CACJ,CAAC,CACG,CAAC,cAENrC,IAAA,MAAG0C,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,2BAAyB,CAAG,CACvD,EACI,CAAC,CAEN","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"/Users/hivecard/Downloads/privatlabel-clean_v1 copie/src/pages/Shop.jsx\",\n  _s = $RefreshSig$();\n// src/pages/Shop.jsx\nimport { useEffect, useState } from \"react\";\nimport \"./shop.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Shop() {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    async function fetchProducts() {\n      try {\n        var _data$data;\n        console.log(\"üõçÔ∏è Chargement des produits depuis Netlify...\");\n        const response = await fetch(\"/.netlify/functions/products\");\n        if (!response.ok) throw new Error(\"Erreur serveur\");\n        const data = await response.json();\n        console.log(\"üíé Donn√©es re√ßues :\", data);\n\n        // üß© Correction ici : on v√©rifie le format exact\n        let items = [];\n        if (Array.isArray(data)) {\n          items = data;\n        } else if (Array.isArray(data.result)) {\n          items = data.result;\n        } else if (Array.isArray((_data$data = data.data) === null || _data$data === void 0 ? void 0 : _data$data.result)) {\n          items = data.data.result;\n        } else {\n          console.warn(\"‚ö†Ô∏è Format inattendu des donn√©es :\", data);\n        }\n\n        // ü™Ñ On extrait le bon prix Printful\n        const formatted = items.map(item => {\n          var _item$sync_variants, _item$sync_variants$, _item$sync_variants2, _item$sync_variants2$;\n          const retail = item.price || ((_item$sync_variants = item.sync_variants) === null || _item$sync_variants === void 0 ? void 0 : (_item$sync_variants$ = _item$sync_variants[0]) === null || _item$sync_variants$ === void 0 ? void 0 : _item$sync_variants$.retail_price) || ((_item$sync_variants2 = item.sync_variants) === null || _item$sync_variants2 === void 0 ? void 0 : (_item$sync_variants2$ = _item$sync_variants2[0]) === null || _item$sync_variants2$ === void 0 ? void 0 : _item$sync_variants2$.variant_retail_price) || \"prix sur demande üî•\";\n          return {\n            id: item.id,\n            name: item.name,\n            thumbnail_url: item.thumbnail_url,\n            price: retail\n          };\n        });\n        setProducts(formatted);\n      } catch (err) {\n        console.error(\"‚ùå Erreur :\", err.message);\n        setError(\"Impossible de charger les produits pour le moment.\");\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchProducts();\n  }, []);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"error-message\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 19\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"shop-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"shop-title\",\n      children: \"\\uD83D\\uDC8E Boutique Privat Label\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"shop-subtitle\",\n      children: \"Luxury \\u2022 Street \\u2022 Glow\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 1\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"loading-text\",\n      children: \"Chargement des produits...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 1\n    }, this) : products.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shop-grid\",\n      children: products.map(p => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"shop-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shop-image-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: p.thumbnail_url,\n            alt: p.name,\n            className: \"shop-image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 1\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"shop-name\",\n          children: p.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"shop-price\",\n          children: [p.price, \" \\u20AC\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"buy-button\",\n          children: \"Voir le produit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 1\n        }, this)]\n      }, p.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 1\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 1\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"loading-text\",\n      children: \"Aucun produit disponible.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 1\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 1\n  }, this);\n}\n_s(Shop, \"jC/kKMpEIb0s6p8BhZPeVj9z1bQ=\");\n_c = Shop;\nvar _c;\n$RefreshReg$(_c, \"Shop\");","map":{"version":3,"names":["useEffect","useState","jsxDEV","_jsxDEV","Shop","_s","products","setProducts","error","setError","loading","setLoading","fetchProducts","_data$data","console","log","response","fetch","ok","Error","data","json","items","Array","isArray","result","warn","formatted","map","item","_item$sync_variants","_item$sync_variants$","_item$sync_variants2","_item$sync_variants2$","retail","price","sync_variants","retail_price","variant_retail_price","id","name","thumbnail_url","err","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","p","src","alt","_c","$RefreshReg$"],"sources":["/Users/hivecard/Downloads/privatlabel-clean_v1 copie/src/pages/Shop.jsx"],"sourcesContent":["// src/pages/Shop.jsx\nimport { useEffect, useState } from \"react\";\nimport \"./shop.css\";\n\nexport default function Shop() {\nconst [products, setProducts] = useState([]);\nconst [error, setError] = useState(null);\nconst [loading, setLoading] = useState(true);\n\nuseEffect(() => {\nasync function fetchProducts() {\ntry {\nconsole.log(\"üõçÔ∏è Chargement des produits depuis Netlify...\");\nconst response = await fetch(\"/.netlify/functions/products\");\nif (!response.ok) throw new Error(\"Erreur serveur\");\n\nconst data = await response.json();\nconsole.log(\"üíé Donn√©es re√ßues :\", data);\n\n// üß© Correction ici : on v√©rifie le format exact\nlet items = [];\nif (Array.isArray(data)) {\nitems = data;\n} else if (Array.isArray(data.result)) {\nitems = data.result;\n} else if (Array.isArray(data.data?.result)) {\nitems = data.data.result;\n} else {\nconsole.warn(\"‚ö†Ô∏è Format inattendu des donn√©es :\", data);\n}\n\n// ü™Ñ On extrait le bon prix Printful\nconst formatted = items.map((item) => {\nconst retail =\nitem.price ||\nitem.sync_variants?.[0]?.retail_price ||\nitem.sync_variants?.[0]?.variant_retail_price ||\n\"prix sur demande üî•\";\nreturn {\nid: item.id,\nname: item.name,\nthumbnail_url: item.thumbnail_url,\nprice: retail,\n};\n});\n\nsetProducts(formatted);\n} catch (err) {\nconsole.error(\"‚ùå Erreur :\", err.message);\nsetError(\"Impossible de charger les produits pour le moment.\");\n} finally {\nsetLoading(false);\n}\n}\n\nfetchProducts();\n}, []);\n\nif (error) return <p className=\"error-message\">{error}</p>;\n\nreturn (\n<div className=\"shop-container\">\n<h1 className=\"shop-title\">üíé Boutique Privat Label</h1>\n<h3 className=\"shop-subtitle\">Luxury ‚Ä¢ Street ‚Ä¢ Glow</h3>\n\n{loading ? (\n<p className=\"loading-text\">Chargement des produits...</p>\n) : products.length > 0 ? (\n<div className=\"shop-grid\">\n{products.map((p) => (\n<div key={p.id} className=\"shop-card\">\n<div className=\"shop-image-wrapper\">\n<img\nsrc={p.thumbnail_url}\nalt={p.name}\nclassName=\"shop-image\"\n/>\n</div>\n<p className=\"shop-name\">{p.name}</p>\n<p className=\"shop-price\">{p.price} ‚Ç¨</p>\n<button className=\"buy-button\">Voir le produit</button>\n</div>\n))}\n</div>\n) : (\n<p className=\"loading-text\">Aucun produit disponible.</p>\n)}\n</div>\n);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}